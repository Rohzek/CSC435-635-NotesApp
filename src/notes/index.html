<template>
  <div class='display'>
    <!-- Import CSS -->
  <require from="../display.css"></require>
  
  <!-- Import font-->
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans:700,700i" rel="stylesheet">

  <!-- Begin page-->
  <div class="title"><div class="title-text">Notes:</div></div>

  <!--  This is our table-->
  <table class="table table-striped" aurelia-table="data.bind: users; display-data.bind: $displayData">
      <thead>
      <tr>
          <th>Id</th>
          <th>Title</th>
          <th>Text</th>
          <th>Category</th>
          <th>Author</th>
          <th>Creation Date</th>
          <th>Controls:</th>
      </tr>
      </thead>
      <tbody>
      <tr repeat.for="note of notes">
          <td>${note.id}</td>
          <td>${note.title}</td>
          <td>${note.note}</td>
          <td>${note.category.name}</td>
          <td>${note.user.name}</td>
          <td>${note.createdOn.toLocaleString()}</td>
          <td>
              <button click.delegate = "deleteData(note.id)">DELETE</button>
          </td>
      </tr>

      <tr>
          <td><span><input type="text" value.bind="newNote.id" placeholder="${index}" value="${index}"></span></td>
          <td><span><input type="text" value.bind="newNote.title" placeholder="Title"></span></td>
          <td><span><input type="text" value.bind="newNote.note" placeholder="Text..."></span></td>
          <td>
            <select value.bind="selectedCat">
              <option model.bind="null">Choose Category...</option>
              <option repeat.for="cat of cats" model.bind="cat.id">${cat.name}</option>
            </select>
          </td>
          <td>
            <select value.bind="selectedUsr">
                <option model.bind="null">Choose Author...</option>
                <option repeat.for="usr of users" model.bind="usr.id">${usr.name}</option>
              </select>
          </td>
          <td>${now.toLocaleString()}</td>
          <td>
              <button click.delegate = "putData()">SUBMIT</button>
              
          </td>
      </tr>
      </tbody>
  </table>
  <p>*Note: You can enter an Id already displayed to update that record, instead.</p>
  <p>**Note: Please <button click.delegate = "refreshPage()">Refresh</button> the page to view changes to database.</p>
</div>
</template>
